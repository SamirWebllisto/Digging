System.register(["./index-legacy-d93c931d.js","./supplier-legacy-65106363.js","./channel-legacy-6f6a2e36.js","./index-legacy-59cc45ce.js","./vue-router@4.1.6_vue@3.2.45-legacy-ac13af8e.js","./vue-i18n@9.2.2_vue@3.2.45-legacy-0c4aa56d.js","./axios@1.2.0-legacy-17ad1183.js","./@vue_reactivity@3.2.45-legacy-fe7a47e6.js","./@vue_runtime-core@3.2.45-legacy-ee6be9ce.js","./vant@4.0.2_vue@3.2.45-legacy-6ef12c30.js"],(function(e,n){"use strict";var t,a,u,i,l,c,o,s,r,h,m,p,d;return{setters:[e=>{t=e.h},e=>{a=e.d},e=>{u=e.c},e=>{i=e.f},e=>{l=e.u,c=e.b},e=>{o=e.u},e=>{s=e.a},e=>{r=e.r,h=e.g},e=>{m=e.c,p=e.b},e=>{d=e.s}],execute:function(){e("u",(function(){const e=l(),n=c(),v=r(!1),{t:y}=o(),g=m((()=>{const e=[];for(const n in a)e.push({lable:n,icon:`https://ullafile.oss-cn-chengdu.aliyuncs.com/image/currency/${n}.png`,...a[n]});return e})),f=h({net:e.query.net,symbol:e.query.symbol,switch:!0,inputValue:e.query.defaultAmount||"100",downValue:g.value[0].acronym,unitIcon:g.value[0].unit,unitName:g.value[0].name,rate:1,accordWithDis:!1,inputState:!1}),V=m((()=>f.switch?e.query.symbol:f.downValue)),w=function(e,n){let t=null;return function(...a){t&&clearTimeout(t),t=setTimeout((()=>{e.apply(this,a)}),n)}}((()=>{T()}),600),b=r({amount:0}),I=r([]),S=r({}),x=()=>{let e=0;return e=f.switch?i(f.inputValue/f.rate,6):b.value.price,b.value.buyEachTimeMin>e?(d(y("noAccordWithMin")+i(b.value.buyEachTimeMin*f.rate,2)+f.unitName),void(f.accordWithDis=!0)):b.value.buyEachTimeMax<e?(d(y("noAccordWithMax")+i(b.value.buyEachTimeMax*f.rate,2)+f.unitName),void(f.accordWithDis=!0)):void(f.accordWithDis=!1)};let N;const T=async n=>{N&&N();const a=s.CancelToken;try{let u="";u=n||(f.switch?i(f.inputValue/f.rate,6):f.inputValue);const l={fiat2Token:f.switch,net:f.net,symbol:f.symbol,address:e.query.to,sourceFiatCurrency:f.unitName,sourceValue:f.inputValue},{code:c,data:o}=await t.get("/payEstimate/allChannelEstimateFee",l,{cancelToken:new a((function(e){N=e}))});if(f.inputState=!1,200===c){if(!f.switch)for(let e=0;e<o.length;e++){const n=o[e];n.price=n.amount,n.amount=n.amount*f.rate}b.value={...o[0]||{}},I.value=[...o]||[],S.value=l,x()}}catch(u){}};T();const j=()=>({net:f.net,value:S.value.value,currency:f.unitName,to:e.query.to,symbol:e.query.symbol,channelIdent:b.value.channelIdent,businessId:e.query.businessId,businessUserId:e.query.businessUserId,type:"buy",channelId:b.value.channelId,tokenAmount:b.value.amount,conversionPrice:b.value.conversionPrice,inputValue:f.switch?f.inputValue:b.value.amount,rate:f.rate,unit:V.value+f.unitIcon,legalUnit:f.downValue}),q=m((()=>0===Number(f.inputValue)||!!f.inputState||!!v.value||(-1!==String(f.inputValue).indexOf(".")?String(f.inputValue).split(".")[0].length>18||String(f.inputValue).split(".")[1].length>18:String(f.inputValue).length>18)));return p((()=>{localStorage.setItem("indexPath",window.location.href)})),{t:y,showLoading:v,downList:g,state:f,unitShow:V,outGetInfo:w,onKsysChange:e=>{f.inputState=!0;const n=String(f.inputValue);if(n){if("del"!==e){if("."===e&&-1!=n.indexOf("."))return;if("0"===f.inputValue[0]&&"."!==f.inputValue[1]){if("0"===e)return;if("."!==e)return f.inputValue=n.slice(1,n.length),f.inputValue=f.inputValue+e,void w()}f.inputValue=n+e}else f.inputValue=n.slice(0,n.length-1),""===f.inputValue&&(f.inputValue="0");w()}},onDownChange:e=>{f.rate=e.rate;let n=i(f.inputValue/e.rate,6);f.unitIcon=e.unit,f.unitName=e.name,T(n)},onSwitch:()=>{"0"!=f.inputValue&&(f.switch=!f.switch,S.value.fiat2Token=f.switch,f.inputValue=b.value.amount,T())},commInfo:b,allChannel:I,changeChannelIdent:e=>{b.value.channelIdent=e.channelIdent,b.value.channelName=e.channelName,b.value.channelIcon=e.channelIcon,b.value.amount=e.amount},commParams:S,accordWithPrc:x,onGetInfo:T,onProcessParam:j,routerSwitch:e=>{q.value||n.push({path:e,query:{params:JSON.stringify(S.value),next:JSON.stringify(j())}})},disabled:q,next:()=>{q.value||f.accordWithDis||(v.value=!0,setTimeout((()=>{v.value=!1}),5e3),u(b.value.channelIdent,j()))},onBack:(e="https://h5.iearnbot.com/pages/home/top-up/buy-coins")=>{window.location.href=e},route:e,changeInpputValue:e=>f.inputValue=e}}))}}}));
